<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∞–º–∏">
    <meta name="theme-color" content="#ffffff">
    <title>–¢–∞–±–ª–∏—Ü–∞ –∑–∞—è–≤–æ–∫</title>
    <link rel="stylesheet" href="/styles.css">
    <!-- –î–æ–±–∞–≤–ª—è–µ–º favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
    <header>
        <div class="header-content">
            <h1>–¢–∞–±–ª–∏—Ü–∞ –∑–∞—è–≤–æ–∫</h1>
            <button id="themeToggle" class="btn theme-toggle" onclick="toggleTheme()">
                üåô
            </button>
        </div>
    </header>

    <main>
        <!-- –§–∏–ª—å—Ç—Ä—ã -->
        <section class="filter-row" aria-label="–§–∏–ª—å—Ç—Ä—ã –∏ –¥–µ–π—Å—Ç–≤–∏—è">
            <div class="filters">
                <div class="filter-group">
                    <label for="filterStatus">–§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É:</label>
                    <select id="filterStatus" onchange="applyFilters()" aria-label="–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å">
                        <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                        <option value="üü° –í –ø—Ä–æ—Ü–µ—Å—Å–µ">üü° –í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
                        <option value="üü¢ –ó–∞–≤–µ—Ä—à–µ–Ω">üü¢ –ó–∞–≤–µ—Ä—à–µ–Ω</option>
                        <option value="üî¥ –û—Ç–º–µ–Ω–µ–Ω">üî¥ –û—Ç–º–µ–Ω–µ–Ω</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="filterPriority">–§–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:</label>
                    <select id="filterPriority" onchange="applyFilters()" aria-label="–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç">
                        <option value="">–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                        <option value="–í—ã—Å–æ–∫–∏–π">–í—ã—Å–æ–∫–∏–π</option>
                        <option value="–°—Ä–µ–¥–Ω–∏–π">–°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="–ù–∏–∑–∫–∏–π">–ù–∏–∑–∫–∏–π</option>
                    </select>
                </div>

                <div class="search-section">
                    <div class="search-input-wrapper">
                        <input type="search" 
                               id="searchInput" 
                               oninput="window.ordersManager.applySearch()" 
                               placeholder="–ü–æ–∏—Å–∫..." 
                               aria-label="–ü–æ–∏—Å–∫ –ø–æ —Ç–∞–±–ª–∏—Ü–µ">
                        <button type="button" 
                                class="btn clear-search" 
                                onclick="window.ordersManager.clearSearch()"
                                aria-label="–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫">
                            ‚úï
                        </button>
                    </div>
                    <span id="searchCounter" class="search-counter"></span>
                </div>

                <div class="filter-group">
                    <button type="button" onclick="window.ordersManager.resetFilters()" class="btn secondary">
                        üîÑ –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
                    </button>
                </div>
            </div>

            <div class="actions">
                <button type="button" onclick="toggleForm()" class="btn primary">
                    <svg class="icon" aria-hidden="true"><!-- –ò–∫–æ–Ω–∫–∞ –ø–ª—é—Å–∞ --></svg>
                    –î–æ–±–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
                </button>
                <button type="button" onclick="exportToExcel()" class="btn secondary">
                    <svg class="icon" aria-hidden="true"><!-- –ò–∫–æ–Ω–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ --></svg>
                    –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
                </button>
                <button type="button" onclick="saveToFile()" class="btn secondary">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
                </button>
                <input type="file" 
                       id="loadDataFile" 
                       accept=".json" 
                       style="display: none" 
                       onchange="loadFromFile(this)">
                <button type="button" onclick="document.getElementById('loadDataFile').click()" class="btn secondary">
                    üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
                </button>
            </div>
        </section>

        <!-- –¢–∞–±–ª–∏—Ü–∞ -->
        <section class="table-container" aria-label="–¢–∞–±–ª–∏—Ü–∞ –∑–∞—è–≤–æ–∫">
            <table id="ordersTable" class="responsive-table">
                <caption class="sr-only">–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞—è–≤–æ–∫</caption>
                <thead>
                    <tr class="header-row">
                        <th onclick="sortTable(0)" draggable="true" data-original-index="0">–ü/–ü</th>
                        <th onclick="sortTable(1)" draggable="true" data-original-index="1">–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞</th>
                        <th onclick="sortTable(2)" draggable="true" data-original-index="2">–ê–≤—Ç–æ—Ä –∑–∞—è–≤–∫–∏</th>
                        <th onclick="sortTable(3)" draggable="true" data-original-index="3">–ú–∞—Ç–µ—Ä–∏–∞–ª</th>
                        <th onclick="sortTable(4)" draggable="true" data-original-index="4">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</th>
                        <th onclick="sortTable(5)" draggable="true" data-original-index="5">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                        <th onclick="sortTable(6)" draggable="true" data-original-index="6">–ï–¥. –∏–∑–º.</th>
                        <th onclick="sortTable(7)" draggable="true" data-original-index="7">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞</th>
                        <th onclick="sortTable(8)" draggable="true" data-original-index="8">–ü–æ—Å—Ç–∞–≤—â–∏–∫</th>
                        <th onclick="sortTable(9)" draggable="true" data-original-index="9">–¢–µ–ª–µ—Ñ–æ–Ω –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞</th>
                        <th onclick="sortTable(10)" draggable="true" data-original-index="10">Email –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞</th>
                        <th onclick="sortTable(11)" draggable="true" data-original-index="11">–î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞</th>
                        <th onclick="sortTable(12)" draggable="true" data-original-index="12">–î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã</th>
                        <th onclick="sortTable(13)" draggable="true" data-original-index="13">–î–∞—Ç–∞ –ø—Ä–∏–≤–æ–∑–∞</th>
                        <th onclick="sortTable(14)" draggable="true" data-original-index="14">–í–∏–¥ –¥–æ—Å—Ç–∞–≤–∫–∏</th>
                        <th onclick="sortTable(15)" draggable="true" data-original-index="15">–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞</th>
                        <th onclick="sortTable(16)" draggable="true" data-original-index="16">–°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–ø–ª–∞—Ç—ã</th>
                        <th onclick="sortTable(17)" draggable="true" data-original-index="17">–ü—Ä–∏–º–µ—á–∞–Ω–∏—è</th>
                        <th onclick="sortTable(18)" draggable="true" data-original-index="18">–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ª–∏—Ü–æ</th>
                        <th onclick="sortTable(19)" draggable="true" data-original-index="19">–°—Å—ã–ª–∫–∞ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <!-- –§–æ—Ä–º–∞ -->
        <dialog id="addOrderForm" class="modal">
            <form id="orderForm" method="dialog" class="form-grid">
                <header class="modal-header">
                    <h2 id="formTitle">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É</h2>
                    <button type="button" onclick="toggleForm()" class="close-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
                </header>

                <div class="form-content">
                    <input type="hidden" id="editIndex" value="-1">

                    <div class="form-group">
                        <label for="author">–ê–≤—Ç–æ—Ä –∑–∞—è–≤–∫–∏:</label>
                        <input type="text" id="author">
                    </div>

                    <div class="form-group">
                        <label for="material">–ú–∞—Ç–µ—Ä–∏–∞–ª:</label>
                        <input type="text" id="material" list="materials">
                        <datalist id="materials">
                            <!-- –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ —á–∞—Å—Ç—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ -->
                        </datalist>
                    </div>

                    <div class="form-group">
                        <label for="quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                        <input type="number" id="quantity">
                    </div>

                    <div class="form-group">
                        <label for="unit">–ï–¥. –∏–∑–º.:</label>
                        <input type="text" id="unit">
                    </div>

                    <div class="form-group">
                        <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞:</label>
                        <input type="text" id="category">
                    </div>

                    <div class="form-group">
                        <label for="supplier">–ü–æ—Å—Ç–∞–≤—â–∏–∫:</label>
                        <input type="text" id="supplier">
                    </div>

                    <div class="form-group">
                        <label for="address">–ê–¥—Ä–µ—Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞:</label>
                        <input type="text" id="address">
                    </div>

                    <div class="form-group">
                        <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞:</label>
                        <input type="tel" id="phone" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}">
                    </div>

                    <div class="form-group">
                        <label for="email">Email –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞:</label>
                        <input type="email" id="email">
                    </div>

                    <div class="form-group">
                        <label for="status">–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞:</label>
                        <select id="status">
                            <option value="üü° –í –ø—Ä–æ—Ü–µ—Å—Å–µ">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
                            <option value="üü¢ –ó–∞–≤–µ—Ä—à–µ–Ω">–ó–∞–≤–µ—Ä—à–µ–Ω</option>
                            <option value="üî¥ –û—Ç–º–µ–Ω–µ–Ω">–û—Ç–º–µ–Ω–µ–Ω</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="orderDate">–î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞:</label>
                        <input type="date" id="orderDate">
                    </div>

                    <div class="form-group">
                        <label for="paymentDeadline">–°—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã:</label>
                        <input type="date" id="paymentDeadline">
                    </div>

                    <div class="form-group">
                        <label for="paymentDate">–î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã:</label>
                        <input type="date" id="paymentDate">
                    </div>

                    <div class="form-group">
                        <label for="deliveryDate">–î–∞—Ç–∞ –ø—Ä–∏–≤–æ–∑–∞:</label>
                        <input type="date" id="deliveryDate">
                    </div>

                    <div class="form-group">
                        <label for="deliveryType">–í–∏–¥ –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
                        <select id="deliveryType">
                            <option value="–°–∞–º–æ–≤—ã–≤–æ–∑">–°–∞–º–æ–≤—ã–≤–æ–∑</option>
                            <option value="–î–æ—Å—Ç–∞–≤–∫–∞">–î–æ—Å—Ç–∞–≤–∫–∞</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="amount">–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞:</label>
                        <input type="number" id="amount">
                    </div>

                    <div class="form-group">
                        <label for="paymentStatus">–°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–ø–ª–∞—Ç—ã:</label>
                        <select id="paymentStatus">
                            <option value="–û–ø–ª–∞—á–µ–Ω–æ">–û–ø–ª–∞—á–µ–Ω–æ</option>
                            <option value="–ù–µ –æ–ø–ª–∞—á–µ–Ω–æ">–ù–µ –æ–ø–ª–∞—á–µ–Ω–æ</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="notes">–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:</label>
                        <textarea id="notes"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="responsible">–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ª–∏—Ü–æ:</label>
                        <input type="text" id="responsible">
                    </div>

                    <div class="form-group">
                        <label for="link">–°—Å—ã–ª–∫–∞ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:</label>
                        <input type="url" id="link">
                    </div>

                    <div class="form-group">
                        <label for="priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
                        <select id="priority">
                            <option value="–í—ã—Å–æ–∫–∏–π">–í—ã—Å–æ–∫–∏–π</option>
                            <option value="–°—Ä–µ–¥–Ω–∏–π">–°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="–ù–∏–∑–∫–∏–π">–ù–∏–∑–∫–∏–π</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        <button type="button" class="btn secondary" onclick="toggleForm()">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </div>
            </form>
        </dialog>
    </main>

    <footer>
        <p>&copy; 2024 –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∞–º–∏</p>
    </footer>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js" defer></script>
    <script src="/script.js" defer></script>
</body>
</html>